-- 3. EMS_ENERGY_REPORT definition

CREATE TABLE "EMS_ENERGY_REPORT" 
   (    "REPORT_ID" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  NOT NULL ENABLE, 
    "EQUIPMENT_ID" VARCHAR2(50) NOT NULL ENABLE, 
    "REPORT_PERIOD" VARCHAR2(10) NOT NULL ENABLE, 
    "PERIOD_START" DATE NOT NULL ENABLE, 
    "PERIOD_END" DATE NOT NULL ENABLE, 
    "TOTAL_CONSUMPTION" NUMBER(15,3), 
    "PEAK_CONSUMPTION" NUMBER(15,3), 
    "AVG_CONSUMPTION" NUMBER(15,3), 
    "REPORT_TEXT" VARCHAR2(2000), 
    "GENERATED_AT" TIMESTAMP (6) DEFAULT SYSTIMESTAMP, 
     CONSTRAINT "PK_EMS_ENERGY_REPORT" PRIMARY KEY ("REPORT_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
   ENABLE
   ) PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  ;


-- EMS_ENERGY_REPORT foreign keys

ALTER TABLE "EMS_ENERGY_REPORT" ADD CONSTRAINT "FK_EMS_ENERGY_REPORT_EQUIP" FOREIGN KEY ("EQUIPMENT_ID")
      REFERENCES "EMS_EQUIPMENT" ("EQUIPMENT_ID") ENABLE;